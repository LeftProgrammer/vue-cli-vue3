define(["exports","./Matrix4-3b2c0630","./Ellipsoid-119327cb","./defaultValue-81eec7ed","./RuntimeError-8952249c","./Transforms-51e2663f","./Math-c2b1b304","./Matrix2-115e2170"],(function(t,n,a,e,o,r,s,i){"use strict";const c=Math.cos,g=Math.sin,u=Math.sqrt,l={computePosition:function(t,n,a,o,r,s,i){const l=n.radiiSquared,h=t.nwCorner,C=t.boundingRectangle;let S=h.latitude-t.granYCos*o+r*t.granXSin;const d=c(S),M=g(S),w=l.z*M;let X=h.longitude+o*t.granYSin+r*t.granXCos;const Y=d*c(X),m=d*g(X),f=l.x*Y,p=l.y*m,x=u(f*Y+p*m+w*M);if(s.x=f/x,s.y=p/x,s.z=w/x,a){const n=t.stNwCorner;e.defined(n)?(S=n.latitude-t.stGranYCos*o+r*t.stGranXSin,X=n.longitude+o*t.stGranYSin+r*t.stGranXCos,i.x=(X-t.stWest)*t.lonScalar,i.y=(S-t.stSouth)*t.latScalar):(i.x=(X-C.west)*t.lonScalar,i.y=(S-C.south)*t.latScalar)}}},h=new i.Matrix2;let C=new n.Cartesian3;const S=new a.Cartographic;let d=new n.Cartesian3;const M=new r.GeographicProjection;function w(t,a,e,o,r,s,c){const g=Math.cos(a),u=o*g,l=e*g,S=Math.sin(a),w=o*S,X=e*S;C=M.project(t,C),C=n.Cartesian3.subtract(C,d,C);const Y=i.Matrix2.fromRotation(a,h);C=i.Matrix2.multiplyByVector(Y,C,C),C=n.Cartesian3.add(C,d,C),s-=1,c-=1;const m=(t=M.unproject(C,t)).latitude,f=m+s*X,p=m-u*c,x=m-u*c+s*X,R=Math.max(m,f,p,x),G=Math.min(m,f,p,x),b=t.longitude,y=b+s*l,O=b+c*w,P=b+c*w+s*l;return{north:R,south:G,east:Math.max(b,y,O,P),west:Math.min(b,y,O,P),granYCos:u,granYSin:w,granXCos:l,granXSin:X,nwCorner:t}}l.computeOptions=function(t,n,a,e,o,r,c){let g,u=t.east,l=t.west,h=t.north,C=t.south,X=!1,Y=!1;h===s.CesiumMath.PI_OVER_TWO&&(X=!0),C===-s.CesiumMath.PI_OVER_TWO&&(Y=!0);const m=h-C;g=l>u?s.CesiumMath.TWO_PI-l+u:u-l;const f=Math.ceil(g/n)+1,p=Math.ceil(m/n)+1,x=g/(f-1),R=m/(p-1),G=i.Rectangle.northwest(t,r),b=i.Rectangle.center(t,S);0===a&&0===e||(b.longitude<G.longitude&&(b.longitude+=s.CesiumMath.TWO_PI),d=M.project(b,d));const y=R,O=x,P=i.Rectangle.clone(t,o),W={granYCos:y,granYSin:0,granXCos:O,granXSin:0,nwCorner:G,boundingRectangle:P,width:f,height:p,northCap:X,southCap:Y};if(0!==a){const t=w(G,a,x,R,0,f,p);h=t.north,C=t.south,u=t.east,l=t.west,W.granYCos=t.granYCos,W.granYSin=t.granYSin,W.granXCos=t.granXCos,W.granXSin=t.granXSin,P.north=h,P.south=C,P.east=u,P.west=l}if(0!==e){a-=e;const t=i.Rectangle.northwest(P,c),n=w(t,a,x,R,0,f,p);W.stGranYCos=n.granYCos,W.stGranXCos=n.granXCos,W.stGranYSin=n.granYSin,W.stGranXSin=n.granXSin,W.stNwCorner=t,W.stWest=n.west,W.stSouth=n.south}return W},t.RectangleGeometryLibrary=l}));
